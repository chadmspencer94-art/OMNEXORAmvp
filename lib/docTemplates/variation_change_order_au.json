{
  "schemaVersion": "1.0",
  "jurisdiction": "AU",
  "docType": "VARIATION_CHANGE_ORDER",
  "title": "Variation / Change Order",
  "disclaimer": "Draft generated from user inputs. Review required. Not certified or verified. This document is a compliance-ready layout aligned with Australian construction industry best practice. Professional review required before use.",
  "sections": [
    {
      "id": "header",
      "title": "Document Header",
      "order": 1,
      "fields": [
        {
          "id": "variation-number",
          "label": "Variation Number",
          "type": "text",
          "required": true,
          "placeholder": "e.g., VAR-001, VO-2024-001"
        },
        {
          "id": "date",
          "label": "Date",
          "type": "date",
          "required": true,
          "dataPath": "createdAt"
        },
        {
          "id": "contract-reference",
          "label": "Contract Reference",
          "type": "text",
          "required": false,
          "dataPath": "jobId",
          "placeholder": "Original contract or job reference"
        },
        {
          "id": "contract-clause-reference",
          "label": "Contract Clause Reference (if applicable)",
          "type": "text",
          "required": false,
          "placeholder": "e.g., Clause 10.2, Schedule 1"
        }
      ]
    },
    {
      "id": "parties",
      "title": "Parties",
      "order": 2,
      "fields": [
        {
          "id": "contractor-name",
          "label": "Contractor Name",
          "type": "text",
          "required": true,
          "dataPath": "businessName",
          "placeholder": "Contractor business name"
        },
        {
          "id": "contractor-abn",
          "label": "Contractor ABN",
          "type": "text",
          "required": false,
          "dataPath": "abn",
          "placeholder": "ABN (XX XXX XXX XXX)"
        },
        {
          "id": "contractor-address",
          "label": "Contractor Address",
          "type": "textarea",
          "required": false,
          "placeholder": "Contractor business address"
        },
        {
          "id": "principal-name",
          "label": "Principal/Client Name",
          "type": "text",
          "required": true,
          "dataPath": "clientName",
          "placeholder": "Principal or client name"
        },
        {
          "id": "principal-address",
          "label": "Principal/Client Address",
          "type": "textarea",
          "required": false,
          "dataPath": "address",
          "placeholder": "Principal or client address"
        }
      ]
    },
    {
      "id": "project-details",
      "title": "Project Details",
      "order": 3,
      "fields": [
        {
          "id": "project-name",
          "label": "Project Name",
          "type": "text",
          "required": true,
          "dataPath": "jobTitle",
          "placeholder": "Project or job name"
        },
        {
          "id": "project-location",
          "label": "Project Location",
          "type": "text",
          "required": true,
          "dataPath": "address",
          "placeholder": "Project site address"
        },
        {
          "id": "original-contract-value",
          "label": "Original Contract Value (if applicable)",
          "type": "currency",
          "required": false,
          "placeholder": "Original contract amount"
        }
      ]
    },
    {
      "id": "variation-details",
      "title": "Variation Details",
      "order": 4,
      "fields": [
        {
          "id": "variation-description",
          "label": "Description of Variation",
          "type": "textarea",
          "required": true,
          "placeholder": "Provide detailed description of the variation or change order"
        },
        {
          "id": "reason-for-variation",
          "label": "Reason for Variation",
          "type": "textarea",
          "required": false,
          "placeholder": "Explain the reason for this variation (e.g., client request, site conditions, design change)"
        },
        {
          "id": "scope-of-work",
          "label": "Scope of Work",
          "type": "textarea",
          "required": true,
          "placeholder": "Describe the scope of work included in this variation"
        },
        {
          "id": "exclusions",
          "label": "Exclusions (if applicable)",
          "type": "textarea",
          "required": false,
          "placeholder": "List any work or items explicitly excluded from this variation"
        }
      ]
    },
    {
      "id": "cost-impact",
      "title": "Cost Impact",
      "order": 5,
      "table": {
        "id": "cost-items",
        "columns": [
          {
            "id": "description",
            "label": "Item Description",
            "width": 40
          },
          {
            "id": "quantity",
            "label": "Quantity",
            "width": 15,
            "type": "number"
          },
          {
            "id": "unit",
            "label": "Unit",
            "width": 10
          },
          {
            "id": "unit-price",
            "label": "Unit Price",
            "width": 15,
            "type": "currency"
          },
          {
            "id": "amount",
            "label": "Amount",
            "width": 20,
            "type": "currency"
          }
        ],
        "rowsKey": "costItems",
        "minRows": 1
      }
    },
    {
      "id": "pricing-summary",
      "title": "Pricing Summary",
      "order": 6,
      "fields": [
        {
          "id": "variation-amount-ex-gst",
          "label": "Variation Amount (ex GST)",
          "type": "currency",
          "required": true,
          "placeholder": "0.00"
        },
        {
          "id": "gst-amount",
          "label": "GST Amount (10%)",
          "type": "currency",
          "required": false,
          "placeholder": "0.00"
        },
        {
          "id": "variation-amount-inc-gst",
          "label": "Variation Amount (inc GST)",
          "type": "currency",
          "required": true,
          "placeholder": "0.00"
        },
        {
          "id": "time-impact",
          "label": "Time Impact (if applicable)",
          "type": "text",
          "required": false,
          "placeholder": "e.g., +5 days, No time impact"
        }
      ]
    },
    {
      "id": "approval",
      "title": "Approval and Signatures",
      "order": 7,
      "fields": [
        {
          "id": "contractor-name-signature",
          "label": "Contractor Name",
          "type": "text",
          "required": true,
          "dataPath": "businessName"
        },
        {
          "id": "contractor-signature",
          "label": "Contractor Signature",
          "type": "text",
          "required": false,
          "placeholder": "Signature"
        },
        {
          "id": "contractor-date",
          "label": "Date",
          "type": "date",
          "required": true,
          "dataPath": "createdAt"
        },
        {
          "id": "principal-name-signature",
          "label": "Principal/Client Name",
          "type": "text",
          "required": false,
          "dataPath": "clientName",
          "placeholder": "Principal or client name"
        },
        {
          "id": "principal-signature",
          "label": "Principal/Client Signature",
          "type": "text",
          "required": false,
          "placeholder": "Signature"
        },
        {
          "id": "principal-date",
          "label": "Date",
          "type": "date",
          "required": false,
          "placeholder": "Date of approval"
        }
      ]
    }
  ],
  "ovisChecks": [
    {
      "id": "missing-variation-number",
      "severity": "high",
      "rule": "empty('variation-number')",
      "message": "Variation number is required"
    },
    {
      "id": "missing-contractor-name",
      "severity": "high",
      "rule": "empty('businessName')",
      "message": "Contractor name is required"
    },
    {
      "id": "missing-principal-name",
      "severity": "high",
      "rule": "empty('clientName')",
      "message": "Principal/client name is required"
    },
    {
      "id": "missing-variation-description",
      "severity": "high",
      "rule": "empty('variation-description')",
      "message": "Variation description is required"
    },
    {
      "id": "missing-scope-of-work",
      "severity": "high",
      "rule": "empty('scope-of-work')",
      "message": "Scope of work is required"
    },
    {
      "id": "missing-cost-items",
      "severity": "high",
      "rule": "len('costItems') < 1",
      "message": "At least one cost item is required"
    },
    {
      "id": "missing-variation-amount",
      "severity": "high",
      "rule": "empty('variation-amount-ex-gst')",
      "message": "Variation amount is required"
    }
  ]
}

